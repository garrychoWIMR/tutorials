<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Tutorial</title>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.1/css/bootstrap.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
        <script src="https://ajax.aspnetcdn.com/ajax/jquery/jquery-3.2.1.min.js"></script>
    </head>
    <body>
        <div style="padding:50px">
            <form id=fm>
                <input type="file"></a>
                <br><br>



                <!--data input section start-->
                Serial_No<br><input name=Serial_No /><br>
                Epoch<br><input name=Epoch /><br>
                <!--data input section end-->






                <br><br>
                <button type=submit>Submit</button>
                <br><br>
            </form>
        </div>
        <script>
            $('#fm').submit(function(event){
                event.preventDefault();
                var d={};
                var a=$("#fm").serializeArray();
                $.each(a, function () { d[this.name]=this.value || '';});
                var data={"request":"add_data_2","form-data":d};
                console.log(data);
                $.ajax({
                    headers:{},
        			type: "POST",
        			url: "http://172.21.135.21/web/api.aspx",
        			contentType: "application/json",
        			charset:"utf-8",
        			dataType: "json",
        			error: function(jqXHR,error, errorThrown){ if(jqXHR.status) {alert(jqXHR.responseText);} else {alert("Something went wrong");}},
        			data: JSON.stringify(data),
        			success: function(c,textStatus, request){
                        console.log(c);
                        alert(c.data)
        			},
        		})
            })
            $('input[type=file]').on('change',function(evt){
                var file = this.files[0];
                file_process(file);
            })
            var file_process=function(file){
                var reader = new FileReader();
                reader.onload = (function(e) {
                    var contents = e.target.result;
                    var lines=contents.replace(/"/g,'').replace(/\r/,'\n').replace(/\n\n/,'\n').split('\n');
                    var startdate=0;
                    var starttime=0;
                    var enddate=0;
                    var endtime=0;
                    var sleeptime=0;
                    var onsetlatency=0;
                    var waso=0;
                    var efficiency=0;
                    var duration=0;
                    var ac_average=0;
                    var sleepbouts=0;
                    var wakebouts=0;
                    var activitycount=0;
                    var stdactivitycount=0;
                    var fragmentation=0;
                    var realdaysStartDate=[];
                    var realdaysStartTime=[];
                    var days=[];
                    var ac_count=[];
                    var wac_count=[];
                    var sleep_time=[];
                    var exclude_start=[];
                    var exclude_end=[];
                    var exclude=[];
                    var start_date;
                    var start_time;
                    var end_date;
                    var end_time;
                    var daily_start=[];
                    var daily_end=[];
                    var duration_min=[];
                    var bedtimemin=0;
                    var bedtimeminstr='';
                    var bedtimemax=0;
                    var bedtimemaxstr='';
                    var bedtimeavg=0;
                    var bedtimecount=0;
                    var bedtime=0;
                    var risetimeavg=0;
                    var risetimecount=0;
                    var risetime=0;
                    var risetimemin=0;
                    var risetimeminstr='';
                    var risetimemax=0;
                    var risetimemaxstr='';
                    var totalexcluded=0;
                    if(lines.length>0){
                        for(var i=0;i<200;i++){
                            var line=lines[i].split(',');
                            if(line.length==1) line=lines[i].split('\t');
                            switch(line[0]){
                            case "Initials:":
                                break;
                            case "Number of Days:":
                                //                            $('input[name=aTRT]').val(line[1]);
                                break;
                            case "Actiwatch Serial Number:":
                                $('input[name=Serial_No]').val(line[1]);
                                    break;
                            case "Epoch Length:":
                                $('input[name=Epoch]').val(line[1]);
                                break;
                            case "Data Collection Start Date:":
                                $('input[name=start_date]').val(line[1]);
                                break;
                            case "Data Collection Start Time:":
                                $('input[name=start_time]').val(line[1]);
                                break;
                            case "Data Collection End Date:":
                                $('input[name=end_date]').val(line[1]);
                                break;
                            case "Data Collection End Time:":
                                $('input[name=end_time]').val(line[1]);
                //---                $('input[name=aTRT]')=((date_time_to_ticks(end_date,end_time)-date_time_to_ticks(start_date,start_time))/24/60/60/1000).toFixed(1);
                                 break;
                            case "Full Name:":
                                break;
                            case "Date of Birth:":
                                break;
                            case "Interval Type":
                                for(var j=0;j<line.length;j++){
                                  switch(line[j]){
                                    case "Start Date":
                                      startdate=j;
                                      break;
                                    case "Start Time":
                                      starttime=j;
                                      break;
                                    case "End Date":
                                      enddate=j;
                                      break;
                                    case "End Time":
                                      endtime=j;
                                      break;
                                    case "Sleep Time":
                                      sleeptime=j;
                                      break;
                                    case "Onset Latency":
                                      onsetlatency=j;
                                      break;
                                    case "WASO":
                                      waso=j;
                                      break;
                                    case "Efficiency":
                                      efficiency=j;
                                      break;
                                    case "Duration":
                                      duration=j;
                                      break;
                                    case "Avg AC/min":
                                      ac_average=j;
                                      break;
                                    case "#Sleep Bouts":
                                      sleepbouts=j;
                                      break;
                                    case "#Wake Bouts":
                                      wakebouts=j;
                                      break;
                                    case "Total AC":
                                      activitycount=j;
                                      break;
                                    case "Std AC":
                                      stdactivitycount=j;
                                      break;
                                    case "Fragmentation":
                                      fragmentation=j;
                                      break;
                                    }
                                }
                            break;
                            /*---
                            case "Rest Summary":
                                switch(line[1]){
                                  case "Average(n)":
                                    if(duration>0) $('input[name=aTIB]').val(line[duration]).trim();
                                    if(sleeptime>0) $('input[name=aTST_aTIB]').val(line[sleeptime]).trim();
                                    if(activitycount>0) $('input[name=SAC]').val(line[activitycount]).trim();
                                    break;
                                  case "Std Dev(n-1)":
                                    if(duration>0) $('input[name=aTIB_std]').val(line[duration]).trim();
                                    if(sleeptime>0) $('input[name=aTST_aTIB_std]').val(line[sleeptime]).trim();
                                    if(activitycount>0) $('input[name=SAC_std]').val(line[activitycount]).trim();
                                    break;
                                  case "Minimum(n)":
                                    if(duration>0) $('input[name=aTIB_min]').val(line[duration]).trim();
                                    if(sleeptime>0) $('input[name=aTST_aTIB_min]').val(line[sleeptime]).trim();
                                    if(activitycount>0) $('input[name=SAC_min]').val(line[activitycount]).trim();
                                    break;
                                  case "Maximum(n)":
                                    if(duration>0) $('input[name=aTIB_max]').val(line[duration]).trim();
                                    if(sleeptime>0) $('input[name=aTST_aTIB_max]').val(line[sleeptime]).trim();
                                    if(activitycount>0) $('input[name=SAC_max]').val(line[activitycount]).trim();
                                    break;
                                }
                            break;
                            */
                            //                    $('input[name=d_ST_24]')=mean.toFixed(2);
                            //                    $('input[name=d_ST_24_STD]')=Math.sqrt(sqrs/(days.length-1)).toFixed(2);
                            //                    $('input[name=AC_24]')=meanac.toFixed(0);
                            //                    $('input[name=AC_24_STD]')=Math.sqrt(sqrsac/(days.length-1)).toFixed(0);
                            /*
                            case "Daily Summary":
                                switch(line[1]){
                                  case "Average(n)":
                                    if(ac_average>0) $('input[name=AC_24]').val(line[ac_average]).trim();
                                    if(sleeptime>0) $('input[name=d_ST_24]').val(line[sleeptime]).trim();
                                    break;
                                  case "Std Dev(n-1)":
                                    if(ac_average>0) $('input[name=AC_24_STD]').val(line[ac_average]).trim();
                                    if(sleeptime>0) $('input[name=d_ST_24_STD]').val(line[sleeptime]).trim();
                                    break;
                                }
                            break;
                            case "Sleep Summary":
                                switch(line[1]){
                                  case "Average(n)":
                                    if(sleeptime>0) $('input[name=aTST]').val(line[sleeptime]).trim();
                                    if(onsetlatency>0) $('input[name=aSOL]').val(line[onsetlatency]).trim();
                                    if(waso>0) $('input[name=aWASO]').val(line[waso]).trim();
                                    if(efficiency>0) $('input[name=aSE]').val(line[efficiency]).trim();
                                    if(sleepbouts>0) $('input[name=SB]').val(line[sleepbouts]).trim();
                                    if(wakebouts>0) $('input[name=WB]').val(line[wakebouts]).trim();
                                    if(stdactivitycount>0) $('input[name=SAC_STD]').val(line[stdactivitycount]).trim();
                                    if(fragmentation>0) $('input[name=FI]').val(line[fragmentation]).trim();
                                    break;
                                  case "Std Dev(n-1)":
                                    if(sleeptime>0) $('input[name=aTST_std]').val(line[sleeptime]).trim();
                                    if(onsetlatency>0) $('input[name=aSOL_std]').val(line[sleeptime]).trim();
                                    if(waso>0) $('input[name=aWASO_std]').val(line[waso]).trim();
                                    if(efficiency>0) $('input[name=aSE_std]').val(line[efficiency]).trim();
                                    if(sleepbouts>0) $('input[name=SB_std]').val(line[sleepbouts]).trim();
                                    if(wakebouts>0) $('input[name=WB_std]').val(line[wakebouts]).trim();
                                    if(stdactivitycount>0) $('input[name=SAC_STD_std]').val(line[stdactivitycount]).trim();
                                    if(fragmentation>0) $('input[name=FI_std]').val(line[fragmentation]).trim();
                                    break;
                                  case "Minimum(n)":
                                    if(sleeptime>0) $('input[name=aTST_min]').val(line[sleeptime]).trim();
                                    if(onsetlatency>0) $('input[name=aSOL_min]').val(line[sleeptime]).trim();
                                    if(waso>0) $('input[name=aWASO_min]').val(line[waso]).trim();
                                    if(efficiency>0) $('input[name=aSE_min]').val(line[efficiency]).trim();
                                    if(sleepbouts>0) $('input[name=SB_min]').val(line[sleepbouts]).trim();
                                    if(wakebouts>0) $('input[name=WB_min]').val(line[wakebouts]).trim();
                                    if(stdactivitycount>0) $('input[name=SAC_STD_min]').val(line[stdactivitycount]).trim();
                                    if(fragmentation>0) $('input[name=FI_min]').val(line[fragmentation]).trim();
                                    break;
                                  case "Maximum(n)":
                                    if(sleeptime>0) $('input[name=aTST_max]').val(line[sleeptime]).trim();
                                    if(onsetlatency>0) $('input[name=aSOL_max]').val(line[sleeptime]).trim();
                                    if(waso>0) $('input[name=aWASO_max]').val(line[waso]).trim();
                                    if(efficiency>0) $('input[name=aSE_max]').val(line[efficiency]).trim();
                                    if(sleepbouts>0) $('input[name=SB_max]').val(line[sleepbouts]).trim();
                                    if(wakebouts>0) $('input[name=WB_max]').val(line[wakebouts]).trim();
                                    if(stdactivitycount>0) $('input[name=SAC_STD_max]').val(line[stdactivitycount]).trim();
                                    if(fragmentation>0) $('input[name=FI_max]').val(line[fragmentation]).trim();
                                    break;
                                }
                            break;
                            case "Custom Summary":
                                switch(line[1]){
                                  case "n":
                                    if(duration>0 && line[duration].trim()!=='NaN') $('input[name=Naps_no]').val(line[duration]).trim();
                                    break;
                                  case "Average(n)":
                                    if(duration>0 && line[duration].trim()!=='NaN') $('input[name=Naps]').val(line[duration]).trim();
                                    break;
                                  case "Std Dev(n-1)":
                                    if(duration>0 && line[duration].trim()!=='NaN') $('input[name=Naps_std]').val(line[duration]).trim();
                                    break;
                                  case "Minimum(n)":
                                    if(duration>0 && line[duration].trim()!=='NaN') $('input[name=Naps_min]').val(line[duration]).trim();
                                    break;
                                  case "Maximum(n)":
                                    if(duration>0 && line[duration].trim()!=='NaN') $('input[name=Naps_max]').val(line[duration]).trim();
                                    break;
                                }
                            break;

                            case "Active Summary":
                                switch(line[1]){
                                  case "Average(n)":
                                    if(activitycount>0) $('input[name=WAC]').val(line[activitycount]).trim();
                                    if(stdactivitycount>0) $('input[name=WAC_STD]').val(line[stdactivitycount]).trim();
                                    break;
                                  case "Std Dev(n-1)":
                                    if(activitycount>0) $('input[name=WAC_std]').val(line[activitycount]).trim();
                                    if(stdactivitycount>0) $('input[name=WAC_STD_std]').val(line[stdactivitycount]).trim();
                                    break;
                                  case "Minimum(n)":
                                    if(activitycount>0) $('input[name=WAC_min]').val(line[activitycount]).trim();
                                    if(stdactivitycount>0) $('input[name=WAC_STD_min]').val(line[stdactivitycount]).trim();
                                    break;
                                  case "Maximum(n)":
                                    if(activitycount>0) $('input[name=WAC_max]').val(line[activitycount]).trim();
                                    if(stdactivitycount>0) $('input[name=WAC_STD_max]').val(line[stdactivitycount]).trim();
                                    break;
                                }
                            break;
                            case "REST":
                                    if(line[1]=="1" || line[1]=="2" || line[1]=="3" || line[1]=="4" || line[1]=="5"
                                    || line[1]=="6"|| line[1]=="7"|| line[1]=="8"|| line[1]=="9"|| line[1]=="10"
                                    || line[1]=="11"|| line[1]=="12"|| line[1]=="13"|| line[1]=="14"|| line[1]=="15"){
                                        if(startdate>0 && line[startdate].trim()!=='NaN') $('input[name=Date_Rest_'+line[1]].val(line[startdate]).trim();
                                        if(activitycount>0 && line[activitycount].trim()!=='NaN') $('input[name=SAC_'+line[1]].val(line[activitycount]).trim();
                                        if(starttime>0) $('input[name=Bedtime_'+line[1]].val(line[starttime]).trim();
                                        if(endtime>0) $('input[name=Risetime_'+line[1]].val(line[endtime]).trim();
                                        if(duration>0) $('input[name=aTIB_'+line[1]].val(line[duration]).trim();
                                        if(sleeptime>0) $('input[name=aTST_aTIB_'+line[1]].val(line[sleeptime]).trim();
                                        var sd='01/01/2011 ';
                                        var sdr='01/01/2011 ';
                                        if(starttime>0 && endtime>0){
                                            var a.val(line[starttime]).trim();
                                            var ar.val(line[endtime]).trim();
                                            var t24='';
                                            var t24r='';
                                            if (a.indexOf("PM") > -1)
                                            {
                                                var pos=a.indexOf(":");
                                                var pos2=a.indexOf("PM");
                                                var b=parseInt(a.substring(0,pos))
                                                b=b+12;
                                                t24 = [b.toString(),a.slice(pos,pos2)].join('');
                                            }
                                            else
                                            {
                                                sd='01/02/2011 ';
                                                var pos=a.indexOf(":");
                                                var pos2=a.indexOf("AM");
                                                var b=parseInt(a.substring(0,pos))
                                                if(b==12) {b=0;t24 = [b.toString(),a.slice(pos,pos2)].join('');}
                                                else t24=a.substring(0,a.indexOf("AM"))
                                            }
                                            if (ar.indexOf("PM") > -1)
                                            {
                                                var posr=ar.indexOf(":");
                                                var pos2r=ar.indexOf("PM");
                                                var br=parseInt(ar.substring(0,pos))
                                                br=br+12;
                                                t24r = [br.toString(),ar.slice(pos,pos2)].join('');
                                            }
                                            else
                                            {
                                                sdr='01/02/2011 ';
                                                var posr=ar.indexOf(":");
                                                var pos2r=ar.indexOf("AM");
                                                var br=parseInt(ar.substring(0,pos))
                                                if(br==12) {br=0;t24r = [br.toString(),ar.slice(pos,pos2)].join('');}
                                                else t24r=ar.substring(0,ar.indexOf("AM"))
                                            }
                                            var d=Date.parse(sd+t24);
                                            var dd=Date.parse('01/02/2011 0:00:00')
                                            var dr=Date.parse(sdr+t24r);
                                            var ddr=Date.parse('01/02/2011 0:00:00')
                                            var diffMs = (d-dd); // milliseconds between now & Christmas
                                            var diffMsr = (dr-ddr); // milliseconds between now & Christmas
                                            bedtime+=diffMs;
                                            risetime+=diffMsr;
                                            bedtimecount++;
                                            risetimecount++;
                                            var diffcount=bedtime/bedtimecount;
                                            if(diffcount<0) diffcount=24*60*60*1000+diffcount;
                                            var bedtimeavg=Math.round(diffcount/1000);
                                            var bedtimeavg=toHHMMSS(bedtimeavg)
                                            if(bedtimemin==0) {bedtimemin=d;bedtimeminstr=a;}
                                            if(bedtimemax==0) {bedtimemax=d;bedtimemaxstr=a;}
                                            if(bedtimemin>d) {bedtimemin=d;bedtimeminstr=a;}
                                            if(bedtimemax<d) {bedtimemax=d;bedtimemaxstr=a;}

                                            var diffcountr=risetime/risetimecount;
                                            if(diffcountr<0) diffcountr=24*60*60*1000+diffcountr;
                                            var risetimeavg=Math.round(diffcountr/1000);
                                            var risetimeavg=toHHMMSS(risetimeavg)
                                            if(risetimemin==0) {risetimemin=dr;risetimeminstr=ar;}
                                            if(risetimemax==0) {risetimemax=dr;risetimemaxstr=ar;}
                                            if(risetimemin>dr) {risetimemin=dr;risetimeminstr=ar;}
                                            if(risetimemax<dr) {risetimemax=dr;risetimemaxstr=ar;}
                                         }
                                    }
                            break;
                            case "ACTIVE":
                                    if(line[1]=="1" || line[1]=="2" || line[1]=="3" || line[1]=="4" || line[1]=="5"
                                    || line[1]=="6"|| line[1]=="7"|| line[1]=="8"|| line[1]=="9"|| line[1]=="10"
                                    || line[1]=="11"|| line[1]=="12"|| line[1]=="13"|| line[1]=="14"|| line[1]=="15"){
                                        if(startdate>0 && line[startdate].trim()!=='NaN') $('input[name=Date_Active_'+line[1]].val(line[startdate]).trim();
                                        if(activitycount>0 && line[activitycount].trim()!=='NaN') $('input[name=WAC_'+line[1]].val(line[activitycount]).trim();
                                        if(activitycount>0 && line[activitycount].trim()!=='NaN' && ac_average>0 && line[ac_average].trim()!=='NaN') $('input[name=Dur_Active_'+line[1]]=(parseFloat(line[activitycount].trim())/parseFloat(line[ac_average].trim())).toFixed(1);
                                    }
                            break;
                            case "SLEEP*":
                            case "SLEEP":
                                    if(line[1]=="1" || line[1]=="2" || line[1]=="3" || line[1]=="4" || line[1]=="5"
                                    || line[1]=="6"|| line[1]=="7"|| line[1]=="8"|| line[1]=="9"|| line[1]=="10"
                                    || line[1]=="11"|| line[1]=="12"|| line[1]=="13"|| line[1]=="14"|| line[1]=="15"){
                                        if(startdate>0 && line[startdate].trim()!=='NaN') $('input[name=Date_Sleep_'+line[1]].val(line[startdate]).trim();
                                        if(sleeptime>0 && line[sleeptime].trim()!=='NaN') $('input[name=aTST_'+line[1]].val(line[sleeptime]).trim();
                                        if(onsetlatency>0 && line[onsetlatency].trim()!=='NaN') $('input[name=aSOL_'+line[1]].val(line[onsetlatency]).trim();
                                        if(waso>0 && line[waso].trim()!=='NaN') $('input[name=aWASO_'+line[1]].val(line[waso]).trim();
                                        if(fragmentation>0 && line[fragmentation].trim()!=='NaN') $('input[name=FI_'+line[1]].val(line[fragmentation]).trim();
                                    }
                            break;
                            case "DAILY":
                                    if(line[1]=="1" || line[1]=="2" || line[1]=="3" || line[1]=="4" || line[1]=="5"
                                    || line[1]=="6"|| line[1]=="7"|| line[1]=="8"|| line[1]=="9"|| line[1]=="10"
                                    || line[1]=="11"|| line[1]=="12"|| line[1]=="13"|| line[1]=="14"|| line[1]=="15"){
                                        if(startdate>0 && line[startdate].trim()!=='NaN') $('input[name=Date_Daily_'+line[1]].val(line[startdate]).trim();
                                        if(activitycount>0 && line[activitycount].trim()!=='NaN') $('input[name=AC_24_'+line[1]].val(line[activitycount]).trim();
                                        if(sleeptime>0 && line[sleeptime].trim()!=='NaN') {
                                            $('input[name=d_ST_24_'+line[1]].val(line[sleeptime]).trim();
                                            if(line[activitycount]!=='0' && line[ac_average]!=='0'){
                                                sleep_time[sleep_time.length]=parseFloat(line[sleeptime].trim())/(parseFloat(line[activitycount].trim())/parseFloat(line[ac_average].trim()))*1440;
                                            }
                                            else sleep_time[sleep_time.length]=0;
                                        }
                                        if(activitycount>0 && line[activitycount].trim()!=='NaN' && line[activitycount].trim()!=='0' && ac_average>0 && line[ac_average].trim()!=='NaN' && line[ac_average].trim()!=='0') $('input[name=Dur_24_'+line[1]]=(parseFloat(line[activitycount].trim())/parseFloat(line[ac_average].trim())).toFixed(1);
                                        //else $('input[name=Dur_24_'+line[1]]='0';

                                    }
                            break;
                            case "EXCLUDED":
                                    if(line[1]!==""){
                                        var sd=date_time_to_ticks(line[startdate].trim(),line[starttime].trim())
                                        var ed=date_time_to_ticks(line[enddate].trim(),line[endtime].trim())
                                        totalexcluded+=ed-sd;
                                   }
                            break;
                            */
                            }
                        }
                        /*----------
                        $('input[name=aBedtime]')=bedtimeavg;
                        $('input[name=aRisetime]')=risetimeavg;
                        $('input[name=aExcl]')=(totalexcluded/24/60/60/1000).toFixed(2);
                        $('input[name=Bedtime_min]')=bedtimeminstr;
                        $('input[name=Bedtime_max]')=bedtimemaxstr;
                        $('input[name=Risetime_min]')=risetimeminstr;
                        $('input[name=Risetime_max]')=risetimemaxstr;
                        var total=0;
                        for (var i = 0; i < sleep_time.length; i++) {
                            total += sleep_time[i]);
                        }
                        var mean=total/sleep_time.length;
                        var sqrs=0;
                        for (var i = 0; i < sleep_time.length; i++) {
                            sqrs += Math.pow(sleep_time[i]-mean,2);
                        }
                        $('input[name=d_ST_24]')=mean.toFixed(2);
                        $('input[name=d_ST_24_STD]')=Math.sqrt(sqrs/(sleep_time.length-1)).toFixed(2);
                        */
                  }
                  /*
                  for (var property in $('input[name=]')) {
                      if($('input[name=]')[property]!==undefined && $('input[name=]')[property]!==null){
                          $('input[name=]')[property]=$('input[name=]')[property].toString();
                      }
                  }
                  */
                  if(ac_average==0) alert("Standard Woolcock Actiware analysis hasn't been use so some outputs are missing. Please re-analyse the file.")
                });
                reader.readAsText(file);
            }
            //-------------------------------------
            var date_time_to_ticks=function(date_str,time_str){
                var st24='';
                if (time_str.indexOf("PM") > -1)
                {
                    var pos=time_str.indexOf(":");
                    var pos2=time_str.indexOf("PM");
                    var b=parseInt(time_str.substring(0,pos))
                    if(b<12) b=b+12;
                    st24 = [b.toString(),time_str.slice(pos,pos2)].join('');
                }
                else
                {
                    st24=time_str.substring(0,time_str.indexOf("AM"))
                }
                var sdateparts=date_str.split('/');
                var stimeparts=st24.split(':');
                return new Date(sdateparts[2], parseInt(sdateparts[1], 10) - 1, sdateparts[0], stimeparts[0], stimeparts[1]);
            }
            //-------------------------------------
            var toHHMMSS = function (sec_num) {
                var ampm='AM'
                var hours   = Math.floor(sec_num / 3600);
                var minutes = Math.floor((sec_num - (hours * 3600)) / 60);
                var seconds = sec_num - (hours * 3600) - (minutes * 60);
                if(hours>12) {hours=hours-12;ampm='PM';}
                if (hours   < 10) {hours   = "0"+hours;}
                if (minutes < 10) {minutes = "0"+minutes;}
                if (seconds < 10) {seconds = "0"+seconds;}
                return hours+':'+minutes+':'+seconds+' '+ampm;
            }
            //-------------------------------------

        </script>
    </body>
</html>
